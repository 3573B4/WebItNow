 	// sFilename = Name of the file how should appear in Azure Storage Account after upload
        // sPath = local path to file we want to upload including the filename itself
        public void UploadToAzure(string sFilename, string sPath)
        {
            string connectionString = ConfigurationManager.AppSettings.Get("StorageConnectionString");
            // Name of the share, directory, and file
            string shareName = "braintesting";
            string dirName = "Administration";
            string fileName = sFilename;
            // Get a reference from our share 
            ShareClient share = new ShareClient(connectionString, shareName);
            // Get a reference from our directory - directory located on root level
            ShareDirectoryClient directory = share.GetDirectoryClient(dirName);
            // Get a reference to a subdirectory not located on root level
            directory = directory.GetSubdirectoryClient("A1");
            directory = directory.GetSubdirectoryClient("B1");
            directory = directory.GetSubdirectoryClient("C1");
            // Get a reference to our file
            ShareFileClient file = directory.GetFileClient(fileName);

            // Max. 4MB (4194304 Bytes in binary) allowed
            const int uploadLimit = 4194304;
           
            // Upload the file
            using (FileStream stream = File.OpenRead(sPath))
            {
                file.Create(stream.Length);
                if (stream.Length <= uploadLimit)
                {
                    file.UploadRange(
                    new HttpRange(0, stream.Length),
                    stream);
                }
                else
                {
                    int bytesRead;
                    long index = 0;
                    byte[] buffer = new byte[uploadLimit];
                    // Stream is larger than the limit so we need to upload in chunks
                    while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        // Create a memory stream for the buffer to upload
                        MemoryStream ms = new MemoryStream(buffer, 0, bytesRead);
                        file.UploadRange(new HttpRange(index, ms.Length), ms);
                        index += ms.Length; // increment the index to the account for bytes already written
                    }
                }
            }
